{
  "name": "debug-cache",
  "description": "Debug Redis cache issues and inspect cached data",
  "instructions": "Help debug caching issues in the Aura system.\n\n1. **Check Redis Connection**:\n   - Verify Redis is running: docker compose ps redis\n   - Test connection: make redis-cli, then PING\n   - Check memory usage: docker compose exec redis redis-cli INFO memory\n\n2. **Inspect Cache Contents**:\n   - List all keys: docker compose exec redis redis-cli KEYS '*'\n   - Show key pattern analysis:\n     - weather:* (weather forecasts)\n     - geocode:* (location coordinates)\n     - route:* (commute routes)\n     - financial:* (stock/crypto prices)\n   - For specific key: docker compose exec redis redis-cli GET <key>\n   - Check TTL: docker compose exec redis redis-cli TTL <key>\n\n3. **Common Cache Issues**:\n   - **Stale data**: Check TTL values in packages/server/mcp_server/utils/cache.py\n   - **Cache misses**: Grep server logs for cache hit/miss patterns\n   - **Memory issues**: Check Redis memory usage and eviction policy\n   - **Connection errors**: Verify REDIS_URL in .env\n\n4. **Cache Testing**:\n   - Clear specific cache: docker compose exec redis redis-cli DEL <key>\n   - Clear all cache: docker compose exec redis redis-cli FLUSHALL\n   - Test cache write: Make API call and verify key created\n   - Test cache read: Make same call again and verify 'cached: true'\n\n5. **Performance Analysis**:\n   - Show cache hit rate from server logs\n   - Identify most frequently cached items\n   - Suggest TTL adjustments based on usage patterns\n\nProvide actionable recommendations based on findings."
}
